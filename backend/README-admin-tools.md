# 後端管理工具集

這是一個集中化的後端管理工具集，提供多種管理功能。

## 📁 目錄結構

```
backend/
├── admin-tools.js          # 主引導腳本
├── scripts/                # 腳本資料夾
│   ├── create-admin.js     # 創建管理員帳號
│   ├── change-user-password.js  # 修改用戶密碼
│   └── unlock-admin.js     # 解鎖管理員帳號
└── README-admin-tools.md   # 本說明文件
```

## 🚀 快速開始

### 方法一：使用主引導腳本（推薦）

```bash
cd backend
node admin-tools.js
```

這會顯示一個互動式選單，讓您選擇要執行的工具。

### 方法二：直接執行特定腳本

```bash
cd backend
node scripts/change-user-password.js    # 修改用戶密碼
node scripts/create-admin.js            # 創建管理員帳號
node scripts/unlock-admin.js            # 解鎖管理員帳號
```

## 📋 可用工具

### 1. 創建管理員帳號
- **功能**: 創建新的管理員用戶帳號
- **用途**: 初始化系統或添加新的管理員
- **要求**: 需要提供用戶名、電子郵件、全名和密碼

### 2. 修改用戶密碼
- **功能**: 修改指定用戶的密碼
- **用途**: 重置用戶密碼或更新密碼
- **特點**: 
  - 支援按用戶ID或用戶名查找
  - 顯示所有可用用戶列表
  - 強制密碼強度要求
  - 多重確認機制

### 3. 解鎖管理員帳號
- **功能**: 解鎖被鎖定的管理員帳號
- **用途**: 當管理員帳號因登入失敗過多而被鎖定時使用
- **特點**: 自動解鎖所有管理員帳號

## 🎯 主引導腳本功能

主引導腳本 (`admin-tools.js`) 提供以下功能：

- **統一入口**: 所有管理工具都通過一個腳本訪問
- **互動式選單**: 清晰的選單界面
- **錯誤處理**: 完整的錯誤處理和提示
- **循環使用**: 可以連續使用多個工具
- **優雅退出**: 支援 Ctrl+C 中斷和正常退出

## 📖 使用範例

### 主引導腳本執行範例

```
🎯 歡迎使用後端管理工具集
請選擇要執行的工具:

🔧 後端管理工具
================

1. 創建管理員帳號
   創建新的管理員用戶帳號

2. 修改用戶密碼
   修改指定用戶的密碼

3. 解鎖管理員帳號
   解鎖被鎖定的管理員帳號

0. 退出

請輸入選項 (0-3): 2

🚀 正在執行: 修改用戶密碼
==================================================
🔧 修改用戶密碼工具
==================

✅ 資料庫連接成功

📋 現有用戶列表:
============================================================
1. ID: 1 | 用戶名: admin | 姓名: 系統管理員
   電子郵件: admin@example.com | 角色: admin

請輸入用戶ID或用戶名: admin
...
```

## 🔧 密碼要求

所有密碼修改工具都強制要求：

- 至少 8 個字符
- 最多 50 個字符
- 至少包含一個小寫字母
- 至少包含一個數字、符號或空白字符

## ⚠️ 注意事項

1. **權限要求**: 這些工具通常需要管理員權限
2. **資料庫連接**: 確保資料庫服務正在運行
3. **備份建議**: 在執行重要操作前建議備份資料庫
4. **用戶通知**: 修改密碼前建議通知相關用戶
5. **安全考慮**: 在安全的環境中執行這些工具

## 🛠️ 故障排除

### 常見問題

1. **資料庫連接失敗**
   - 檢查資料庫服務是否運行
   - 確認資料庫文件路徑正確

2. **腳本找不到**
   - 確保在正確的目錄中執行
   - 檢查腳本文件是否存在

3. **權限錯誤**
   - 確保有足夠的權限訪問資料庫
   - 檢查文件讀寫權限

### 錯誤處理

所有腳本都包含完整的錯誤處理：
- 輸入驗證
- 資料庫錯誤處理
- 文件系統錯誤處理
- 優雅的錯誤提示

## 📚 相關文件

- `scripts/create-admin.js` - 創建管理員帳號腳本
- `scripts/change-user-password.js` - 修改用戶密碼腳本
- `scripts/unlock-admin.js` - 解鎖管理員帳號腳本
- `src/controllers/authController.js` - 認證控制器
- `src/models/User.js` - 用戶模型

## 🔄 擴展

要添加新的管理工具：

1. 在 `scripts/` 資料夾中創建新的腳本文件
2. 在 `admin-tools.js` 的 `scripts` 陣列中添加新工具
3. 確保新腳本導出一個函數
4. 更新本說明文件

## 📞 支援

如果遇到問題，請檢查：
1. Node.js 版本是否支援
2. 依賴套件是否已安裝
3. 資料庫配置是否正確
4. 文件權限是否適當 